@{
    ViewData["Title"] = "Analytics Henkaten";
}

@section Styles {
    <link rel="stylesheet" href="~/css/henkaten-analytics.css" asp-append-version="true" />
}

<div class="analytics-container">
    <!-- Header Section -->
    <div class="page-header-analytics">
        <div class="header-content">
            <div class="header-left">
                <i class="ph-chart-bar header-icon"></i>
                <div class="header-text">
                    <h1 class="page-title">Analytics <span class="gradient-text">Problem Henkaten</span></h1>
                    <p class="page-subtitle">Visualisasi Data Temuan dan Performa Perbaikan</p>
                </div>
            </div>
            <div class="header-right" style="display: flex; gap: 1rem; align-items: center;">
                <div class="filter-group-analytics">
                    <select id="filterMonth" class="filter-select">
                        <option value="">Semua Bulan</option>
                        <option value="01">Januari</option>
                        <option value="02">Februari</option>
                        <option value="03">Maret</option>
                        <option value="04">April</option>
                        <option value="05">Mei</option>
                        <option value="06">Juni</option>
                        <option value="07">Juli</option>
                        <option value="08">Agustus</option>
                        <option value="09">September</option>
                        <option value="10">Oktober</option>
                        <option value="11">November</option>
                        <option value="12">Desember</option>
                    </select>
                    <select id="filterYear" class="filter-select">
                        <option value="">Semua Tahun</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                        <option value="2026">2026</option>
                    </select>
                </div>
                <a href="@Url.Action("Index", "Henkaten")" class="btn-add-new-subtle" style="background: rgba(255, 255, 255, 0.05); border-color: rgba(255,255,255,0.1); color: #fff; text-decoration: none;">
                    <i class="ph-table"></i>
                    <span>Tabel Temuan</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Stats Overview -->
    <div class="stats-overview">
        <div class="stat-item">
            <div class="stat-icon icon-blue">
                <i class="ph-database"></i>
            </div>
            <div class="stat-info">
                <div class="stat-label">Total Temuan</div>
                <div class="stat-value" id="totalTemuan">0</div>
            </div>
        </div>
        <div class="stat-item">
            <div class="stat-icon icon-orange">
                <i class="ph-clock"></i>
            </div>
            <div class="stat-info">
                <div class="stat-label">Pending</div>
                <div class="stat-value" id="pendingTemuan">0</div>
            </div>
        </div>
        <div class="stat-item">
            <div class="stat-icon icon-green">
                <i class="ph-check-circle"></i>
            </div>
            <div class="stat-info">
                <div class="stat-label">Selesai</div>
                <div class="stat-value" id="selesaiTemuan">0</div>
            </div>
        </div>
        <div class="stat-item">
            <div class="stat-icon icon-red">
                <i class="ph-trend-up"></i>
            </div>
            <div class="stat-info">
                <div class="stat-label">Ratio Selesai</div>
                <div class="stat-value" id="ratioSelesai">0%</div>
            </div>
        </div>
    </div>

    <!-- Analytics Charts Grid -->
    <div class="dashboard-grid">
        <!-- Chart 1: Problem Status -->
        <div class="chart-card span-2">
            <div class="chart-header">
                <div class="chart-title">
                    <i class="ph-chart-pie"></i>
                    <span>Status Penyelesaian</span>
                </div>
            </div>
            <div class="chart-body">
                <canvas id="statusChart"></canvas>
            </div>
        </div>

        <!-- Chart 2: 4M Distribution -->
        <div class="chart-card span-2">
            <div class="chart-header">
                <div class="chart-title">
                    <i class="ph-cube"></i>
                    <span>Kategori 4M</span>
                </div>
            </div>
            <div class="chart-body">
                <canvas id="categoryChart"></canvas>
            </div>
        </div>

        <!-- Chart 3: Shift Analysis -->
        <div class="chart-card span-2">
            <div class="chart-header">
                <div class="chart-title">
                    <i class="ph-clock-afternoon"></i>
                    <span>Distribusi Per Shift</span>
                </div>
            </div>
            <div class="chart-body">
                <canvas id="shiftChart"></canvas>
            </div>
        </div>

        <!-- Chart 4: Monthly Trend -->
        <div class="chart-card span-2">
            <div class="chart-header">
                <div class="chart-title">
                    <i class="ph-chart-line"></i>
                    <span>Tren Temuan Masalah</span>
                </div>
            </div>
            <div class="chart-body">
                <canvas id="trendChart"></canvas>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="~/js/henkaten-analytics.js" asp-append-version="true"></script>
}
